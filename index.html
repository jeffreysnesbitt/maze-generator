<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printable Maze Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #mazeCanvas {
            border: 1px solid black;
            display: block;
            margin: 20px auto;
        }
        button {
            margin-top: 20px;
        }
    </style>
        <script>
               const canvasSize = 816; // 8.5 inches * 96 DPI
        const cellSize = 24;
        const numCells = (canvasSize / cellSize) - 1;

       function init() {
  const canvas = document.getElementById('mazeCanvas');
  canvas.width = canvasSize;
  canvas.height = canvasSize;
  const ctx = canvas.getContext('2d');

  const numCells = canvasSize / cellSize;
  const maze = generateMaze(numCells, numCells);
  drawMaze(ctx, maze);
}



     }

   function generateMaze(width, height) {
    // Create a 2D array of cells for the maze
    const maze = new Array(height).fill(null).map(() => new Array(width).fill(false));

    // Create a 2D array to track visited cells during maze generation
    const visited = new Array(height).fill(null).map(() => new Array(width).fill(false));

    // Initialize the stack with the starting cell
    const stack = [{x: 1, y: 1, dir: null}];
    visited[1][1] = true;

    function isWithinBounds(x, y) {
        return x >= 0 && x < width && y >= 0 && y < height;
    }

    function getNeighbours(x, y) {
        const neighbours = [            { x: x - 1, y: y, dir: [-1, 0] },
            { x: x + 1, y: y, dir: [1, 0] },
            { x: x, y: y - 1, dir: [0, -1] },
            { x: x, y: y + 1, dir: [0, 1] }
        ];

        return neighbours.filter(({ x, y }) => isWithinBounds(x, y));
    }

    function getUnvisitedNeighbours(x, y) {
        return getNeighbours(x, y).filter(({ x, y }) => !visited[y][x]);
    }

    function visit(x, y) {
        visited[y][x] = true;
    }

    function carvePassage(x, y, dir) {
        maze[y + dir[1]][x + dir[0]] = true;
    }

    function randomElement(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    function generatePath(x, y) {
        visit(x, y);

        while (stack.length > 0) {
            const current = stack[stack.length - 1];

            if (current.x == width - 2 && current.y == height - 2) {
                // Reached the end, ensure a path to the start
                let backtrack = current;
                while (backtrack.dir !== null) {
                    carvePassage(backtrack.x, backtrack.y, backtrack.dir);
                    backtrack = {
                        x: backtrack.x - backtrack.dir[0],
                        y: backtrack.y - backtrack.dir[1],
                        dir: visited[backtrack.y - backtrack.dir[1]][backtrack.x - backtrack.dir[0]] ? backtrack.dir : null
                    }
                }
                return;
            }

            const neighbours = getUnvisitedNeighbours(current.x, current.y);

            if (neighbours.length > 0) {
                const { x: nx, y: ny, dir } = randomElement(neighbours);

                carvePassage(current.x, current.y, dir);
                visit(nx, ny);
                stack.push({ x: nx, y: ny, dir: dir });
            } else {
                stack.pop();
            }
        }
    }

    generatePath(1, 1);
    return maze;
}




function drawMaze(ctx, maze) {
    ctx.fillStyle = 'white';
    ctx.fillRect(0, 0, canvasSize, canvasSize);

    ctx.fillStyle = 'black';
    for (let y = 0; y < maze.length; y++) {
       


    ctx.fillStyle = 'red';
    ctx.fillRect(0, 0, cellSize, cellSize);

    ctx.fillStyle = 'green';
    ctx.fillRect(canvasSize - cellSize, canvasSize - cellSize, cellSize, cellSize);
}


 

         function printMaze() {
            window.print();
        }
    </script>
</head>
<body onload="init()">
    <h1>Printable Maze Generator</h1>
    <canvas id="mazeCanvas"></canvas>
    <button onclick="printMaze()">Print Maze</button>
</body>
</html>
